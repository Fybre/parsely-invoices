<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Parsely Help Center</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PWA manifest and icons -->
<link rel="manifest" href="/static/manifest.json">
<link rel="icon" type="image/x-icon" href="/static/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
<meta name="theme-color" content="#16a34a">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<style>
/* â”€â”€ Reset & Variables (Consistent with index.html) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --hdr-h:     56px;
  --side-w:    280px;
  --bg:        #f0f2f5;
  --card:      #ffffff;
  --sidebar:   #1a2035;
  --side-item: #242d47;
  --side-sel:  #2e3f6e;
  --side-hov:  #1f2d4a;
  --border:    #e2e6ea;
  --text:      #1c2533;
  --muted:     #6b7280;
  --ok:        #16a34a;
  --warn:      #d97706;
  --err:       #dc2626;
  --info:      #2563eb;
  --ok-bg:     #dcfce7;
  --warn-bg:   #fef3c7;
  --err-bg:    #fee2e2;
  --info-bg:   #dbeafe;
  --accent:    #3b5bdb;
  --exported:  #7c3aed;
  --exported-bg: #ede9fe;
  --radius:    8px;
  --shadow:    0 1px 3px rgba(0,0,0,.08), 0 1px 2px rgba(0,0,0,.06);
  --shadow-md: 0 4px 6px rgba(0,0,0,.07), 0 2px 4px rgba(0,0,0,.06);
}

[data-theme="dark"] {
  --bg:        #0f172a;
  --card:      #1e293b;
  --sidebar:   #0f172a;
  --side-item: #1e293b;
  --side-sel:  #334155;
  --side-hov:  #2d3748;
  --border:    #334155;
  --text:      #e2e8f0;
  --muted:     #94a3b8;
  --ok-bg:     rgba(22, 163, 74, 0.2);
  --warn-bg:   rgba(217, 119, 6, 0.2);
  --err-bg:    rgba(220, 38, 38, 0.2);
  --info-bg:   rgba(37, 99, 235, 0.2);
}

/* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
html, body { height: 100%; }
body {
  height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 13px;
  color: var(--text);
  background: var(--bg);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

header {
  height: var(--hdr-h);
  background: var(--card);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 20px;
  gap: 24px;
  flex-shrink: 0;
  box-shadow: var(--shadow);
  z-index: 10;
}

.logo-link {
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 8px;
}
.app-title {
  font-size: 15px;
  font-weight: 700;
  color: #16a34a;
  white-space: nowrap;
}
.help-badge {
  font-size: 10px;
  background: var(--info-bg);
  color: var(--info);
  padding: 2px 8px;
  border-radius: 12px;
  font-weight: 600;
  text-transform: uppercase;
}

.header-actions {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 12px;
}

.btn-theme {
  display: flex; align-items: center; justify-content: center;
  width: 32px; height: 32px; border: 1px solid var(--border);
  border-radius: 8px; background: var(--card); color: var(--muted);
  cursor: pointer; transition: all 0.15s;
}
.btn-theme:hover { background: var(--bg); color: var(--text); }
.btn-theme .icon-sun { display: none; }
.btn-theme .icon-moon { display: block; }
[data-theme="dark"] .btn-theme .icon-sun { display: block; }
[data-theme="dark"] .btn-theme .icon-moon { display: none; }

.back-link {
  color: var(--muted);
  text-decoration: none;
  font-size: 13px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
}
.back-link:hover { color: var(--text); }

/* â”€â”€ Main Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.body-wrap {
  display: flex;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

aside {
  width: var(--side-w);
  background: var(--sidebar);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  overflow-y: auto;
  padding: 16px 0;
}

.nav-group {
  margin-bottom: 24px;
}
.nav-title {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: rgba(255,255,255,.3);
  font-weight: 700;
  padding: 0 16px 8px;
}
.side-tab {
  display: block;
  width: 100%;
  text-align: left;
  padding: 10px 16px;
  background: transparent;
  border: none;
  font-size: 13px;
  font-weight: 500;
  color: rgba(255,255,255,.6);
  cursor: pointer;
  transition: all .15s;
  border-left: 3px solid transparent;
}
.side-tab:hover { background: var(--side-hov); color: #fff; }
.side-tab.active {
  background: var(--side-sel);
  color: #fff;
  border-left-color: var(--accent);
}

main {
  flex: 1;
  overflow-y: auto;
  padding: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.content-max {
  width: 100%;
  max-width: 900px;
}

.page-header {
  margin-bottom: 32px;
}
.page-title { font-size: 28px; font-weight: 700; margin-bottom: 8px; color: var(--text); }
.page-subtitle { font-size: 15px; color: var(--muted); }

/* â”€â”€ Help Content Styles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.help-container { display: flex; flex-direction: column; gap: 32px; }
.help-section { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; box-shadow: var(--shadow); }
.help-section h2 { font-size: 20px; font-weight: 700; margin-bottom: 16px; color: var(--text); border-bottom: 1px solid var(--border); padding-bottom: 12px; }
.help-section h3 { font-size: 16px; font-weight: 600; margin: 24px 0 12px; color: var(--text); }
.help-section p { margin-bottom: 16px; font-size: 14px; line-height: 1.6; color: var(--text); opacity: 0.9; }
.help-section ul, .help-section ol { margin-left: 20px; margin-bottom: 16px; font-size: 14px; }
.help-section li { margin-bottom: 8px; line-height: 1.5; }

/* Components */
.card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; margin: 24px 0; }
.card { background: var(--bg); border-radius: var(--radius); padding: 20px; border: 1px solid var(--border); }
.card h4 { margin-top: 0; margin-bottom: 8px; font-size: 14px; font-weight: 700; }
.card p { margin: 0; font-size: 13px; color: var(--muted); line-height: 1.4; }

.tip { padding: 16px; border-radius: var(--radius); border-left: 4px solid var(--accent); background: var(--info-bg); margin: 16px 0; }
.tip-title { font-weight: 700; color: var(--info); margin-bottom: 6px; font-size: 13px; }
.tip.warning { border-left-color: var(--warn); background: var(--warn-bg); }
.tip.warning .tip-title { color: var(--warn); }
.tip.error { border-left-color: var(--err); background: var(--err-bg); }
.tip.error .tip-title { color: var(--err); }

table { width: 100%; border-collapse: collapse; font-size: 13px; margin: 16px 0; background: var(--card); }
th, td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); }
th { background: var(--bg); font-weight: 700; color: var(--muted); text-transform: uppercase; font-size: 11px; }

code { font-family: 'SF Mono', Monaco, Consolas, monospace; font-size: 12px; background: var(--bg); padding: 2px 6px; border-radius: 4px; color: var(--accent); }
pre { background: #1a2035; color: #e2e8f0; padding: 16px; border-radius: var(--radius); overflow-x: auto; font-size: 12px; line-height: 1.5; margin: 16px 0; }
pre code { background: transparent; color: inherit; padding: 0; }

kbd { background: var(--card); border: 1px solid var(--border); border-bottom-width: 2px; border-radius: 4px; padding: 2px 6px; font-family: inherit; font-size: 11px; font-weight: 700; box-shadow: 0 1px 1px rgba(0,0,0,.1); }

.status { display: inline-flex; align-items: center; gap: 6px; padding: 3px 10px; border-radius: 20px; font-size: 11px; font-weight: 700; }
.status.needs_review { background: var(--warn-bg); color: var(--warn); }
.status.ready        { background: var(--ok-bg);   color: var(--ok); }
.status.exported     { background: var(--exported-bg); color: var(--exported); }

.steps { counter-reset: step; }
.step { display: flex; gap: 20px; margin-bottom: 24px; }
.step-number { width: 32px; height: 32px; background: var(--accent); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0; font-size: 14px; }
.step-content { flex: 1; }
.step-content h4 { margin: 0 0 8px; font-size: 15px; font-weight: 700; }

@media (max-width: 1024px) {
  aside { width: 200px; }
}
@media (max-width: 768px) {
  .body-wrap { flex-direction: column; }
  aside { width: 100%; height: auto; border-right: none; border-bottom: 1px solid var(--border); }
  main { padding: 20px; }
}
</style>
</head>
<body>

<header>
  <a href="/" class="logo-link">
    <div class="app-title">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 4px;">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
      </svg>
      Parsely
    </div>
    <span class="help-badge">Help Center</span>
  </a>
  
  <div class="header-actions">
    <button class="btn-theme" onclick="toggleTheme()" title="Toggle dark mode">
      <svg class="icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
      </svg>
      <svg class="icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"></circle>
        <line x1="12" y1="1" x2="12" y2="3"></line>
        <line x1="12" y1="21" x2="12" y2="23"></line>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
        <line x1="1" y1="12" x2="3" y2="12"></line>
        <line x1="21" y1="12" x2="23" y2="12"></line>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
      </svg>
    </button>
    <a href="/" class="back-link">â† Dashboard</a>
  </div>
</header>

<div class="body-wrap">
  <aside>
    <div class="nav-group">
      <div class="nav-title">Documentation</div>
      <button class="side-tab active" data-tab="getting-started" onclick="setTab('getting-started')">Getting Started</button>
      <button class="side-tab" data-tab="user-guide" onclick="setTab('user-guide')">User Guide</button>
      <button class="side-tab" data-tab="system-functions" onclick="setTab('system-functions')">System Functions</button>
      <button class="side-tab" data-tab="troubleshooting" onclick="setTab('troubleshooting')">Troubleshooting</button>
    </div>
    <div class="nav-group">
      <div class="nav-title">Reference</div>
      <button class="side-tab" data-tab="api-reference" onclick="setTab('api-reference')">API Reference</button>
      <button class="side-tab" data-tab="glossary" onclick="setTab('glossary')">Glossary</button>
      <button class="side-tab" data-tab="keyboard-shortcuts" onclick="setTab('keyboard-shortcuts')">Keyboard Shortcuts</button>
    </div>
  </aside>

  <main>
    <div class="content-max">
      <div class="page-header">
        <h1 class="page-title" id="page-title">Getting Started</h1>
        <p class="page-subtitle" id="page-subtitle">Learn the basics of invoice processing with Parsely</p>
      </div>
      <div id="content-area"></div>
    </div>
  </main>
</div>

<script>
const sections = {
  'getting-started': {
    title: 'Getting Started',
    subtitle: 'Learn the basics of invoice processing with Parsely',
    content: `
      <div class="help-container">
        <div class="help-section">
          <h2>What is Parsely?</h2>
          <p>Parsely is an AI-powered invoice processing pipeline designed to extract structured data from PDF invoices, match them against purchase orders and supplier records, and streamline your accounts payable workflow.</p>
          
          <div class="card-grid">
            <div class="card">
              <h4>ğŸ¤– AI-Powered Extraction</h4>
              <p>Automatically extracts invoice data, line items, and metadata using advanced language models.</p>
            </div>
            <div class="card">
              <h4>ğŸ¯ Smart Matching</h4>
              <p>Matches suppliers by ABN, name, email domain, and purchase order numbers.</p>
            </div>
            <div class="card">
              <h4>ğŸ” Discrepancy Detection</h4>
              <p>Identifies arithmetic errors, tax mismatches, and PO line item discrepancies.</p>
            </div>
            <div class="card">
              <h4>âœ… Review Workflow</h4>
              <p>Web-based dashboard for reviewing, correcting, and approving invoices.</p>
            </div>
          </div>
        </div>

        <div class="help-section">
          <h2>Your First Invoice</h2>
          <div class="steps">
            <div class="step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>Upload or Drop PDF Files</h4>
                <p>Drag and drop PDF files into the left sidebar "Upload" area or click it to pick files. Files are automatically queued for processing.</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>Wait for Extraction</h4>
                <p>The system processes each PDF through parsing, table extraction, AI metadata extraction, and validation. This typically takes 10-30 seconds.</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>Review the Results</h4>
                <p>Click on an invoice in the list to view it. Check that supplier details, line items, totals, and tax amounts are correct.</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">4</div>
              <div class="step-content">
                <h4>Approve or Flag</h4>
                <p>If correct, mark as "Ready" (<kbd>S</kbd>). If it needs attention, "Flag" it (<kbd>F</kbd>) with a note.</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">5</div>
              <div class="step-content">
                <h4>Export</h4>
                <p>Export approved invoices (<kbd>X</kbd>) to generate JSON/XML data files in the output directory.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="help-section">
          <h2>Understanding Statuses</h2>
          <table>
            <thead>
              <tr><th>Status</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="status needs_review">Needs Review</span></td>
                <td>Initial state. Requires operator verification before export.</td>
              </tr>
              <tr>
                <td><span class="status ready">Ready</span></td>
                <td>Verified and approved. Ready to be exported to downstream systems.</td>
              </tr>
              <tr>
                <td><span class="status exported">Exported</span></td>
                <td>Already exported. The data and PDF are in the output folder.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    `
  },
  'user-guide': {
    title: 'User Guide',
    subtitle: 'Detailed instructions for reviewing and processing invoices',
    content: `
      <div class="help-container">
        <div class="help-section">
          <h2>Reviewing Extracted Data</h2>
          <p>The right panel displays all extracted information organized into logical sections.</p>
          
          <h3>Supplier Information</h3>
          <ul>
            <li><strong>Supplier Name:</strong> Extracted from the document.</li>
            <li><strong>Supplier ID:</strong> Internal identifier from master data.</li>
            <li><strong>Match Method:</strong> Indicates how we found this supplier (ABN, exact name, fuzzy name, etc).</li>
          </ul>
          
          <div class="tip warning">
            <div class="tip-title">Check Match Confidence</div>
            <p>If the match method is "name_fuzzy", verify that the supplier is correct, as fuzzy matching can sometimes pick similar trading names.</p>
          </div>
          
          <h3>Invoice Details & Financials</h3>
          <ul>
            <li><strong>Invoice Number:</strong> Extracted reference.</li>
            <li><strong>Due Date:</strong> Extracted or calculated from terms.</li>
            <li><strong>Totals:</strong> Subtotal, Tax, and Total are validated against each other.</li>
          </ul>
        </div>

        <div class="help-section">
          <h2>Correcting Data</h2>
          <p>Click <strong>Edit</strong> (or press <kbd>E</kbd>) to modify any field.</p>
          <ul>
            <li><strong>Supplier Lookup:</strong> Click the magnifying glass in the Supplier field to search the master list.</li>
            <li><strong>Line Items:</strong> Click "Edit Line Items" to modify descriptions, quantities, or prices.</li>
            <li><strong>Save Changes:</strong> Press <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to save. Validation runs automatically after saving.</li>
          </ul>
        </div>

        <div class="help-section">
          <h2>Handling Discrepancies</h2>
          <p>Discrepancies appear as colored warnings in the right panel.</p>
          <ul>
            <li><strong>Critical (Red):</strong> Math errors or invalid POs. Must be fixed or noted before export.</li>
            <li><strong>Warning (Yellow):</strong> Price/Quantity mismatches or low confidence matches.</li>
            <li><strong>Info (Blue):</strong> Missing due dates or assumed currencies.</li>
          </ul>
          <p>Use the <strong>Notes</strong> panel (<kbd>N</kbd>) to document why a discrepancy was accepted.</p>
        </div>
      </div>
    `
  },
  'system-functions': {
    title: 'System Functions',
    subtitle: 'Understanding the pipeline and configuration options',
    content: `
      <div class="help-container">
        <div class="help-section">
          <h2>The Pipeline Stages</h2>
          <ol>
            <li><strong>Parsing:</strong> Docling extracts text layout and tables.</li>
            <li><strong>LLM Extraction:</strong> AI identifies header and summary data.</li>
            <li><strong>Matching:</strong> Supplier master data and Purchase Orders are linked.</li>
            <li><strong>Validation:</strong> Mathematical and business rule checks are performed.</li>
          </ol>
        </div>

        <div class="help-section">
          <h2>Authentication Modes</h2>
          <p>Set via <code>AUTH_MODE</code> environment variable:</p>
          <ul>
            <li><code>disabled</code>: No login required.</li>
            <li><code>admin_only</code>: Password required only for settings/admin tasks.</li>
            <li><code>full</code>: Login required for all access.</li>
          </ul>
        </div>

        <div class="help-section">
          <h2>Configuration</h2>
          <h3>Custom Fields</h3>
          <p>Add site-specific extraction rules in <code>config/custom_fields.json</code>.</p>
          <h3>Column Mapping</h3>
          <p>Map non-standard table headers in <code>config/column_keys.json</code>.</p>
        </div>
      </div>
    `
  },
  'troubleshooting': {
    title: 'Troubleshooting',
    subtitle: 'Common issues and how to resolve them',
    content: `
      <div class="help-container">
        <div class="help-section">
          <h2>Common Issues</h2>
          
          <h3>Invoice Not Appearing</h3>
          <p>Check the <code>pipeline</code> logs: <code>docker compose logs -f pipeline</code>. Ensure the file is a valid PDF and under the size limit.</p>
          
          <h3>Poor Extraction</h3>
          <p>Try a different LLM model (e.g., <code>qwen2.5:7b</code> or <code>gpt-4o-mini</code>). Ensure the PDF text is selectable; if not, OCR may be required.</p>
          
          <h3>Database Locked</h3>
          <p>Restart the containers: <code>docker compose restart dashboard</code>. This typically happens if multiple processes try to write to SQLite simultaneously.</p>
        </div>
      </div>
    `
  },
  'api-reference': {
    title: 'API Reference',
    subtitle: 'REST API endpoints for integration',
    content: `
      <div class="help-container">
        <div class="help-section">
          <h2>Invoices</h2>
          <pre><code>GET   /api/invoices</code> (List with search/status filters)
<code>GET   /api/invoices/{stem}</code> (Full details)
<code>PATCH /api/invoices/{stem}/status</code> (Set ready/needs_review)
<code>PATCH /api/invoices/{stem}/corrections</code> (Update fields)
<code>PATCH /api/invoices/{stem}/notes</code> (Update notes)
<code>POST  /api/invoices/{stem}/export</code> (Trigger export)
<code>POST  /api/invoices/{stem}/reprocess</code> (Rerun pipeline)
<code>POST  /api/invoices/upload</code> (Multipart upload)</pre>
        </div>

        <div class="help-section">
          <h2>Data Management</h2>
          <pre><code>GET   /api/suppliers</code>
<code>POST  /api/suppliers/create</code>
<code>GET   /api/purchase-orders</code>
<code>GET   /api/stats</code>
<code>POST  /api/bulk-export</code> (Export all Ready)</pre>
        </div>
      </div>
    `
  },
  'glossary': {
    title: 'Glossary',
    subtitle: 'Terms used in Parsely',
    content: `
      <div class="help-container">
        <div class="help-section">
          <dl>
            <dt>ABN</dt><dd>Australian Business Number. Primary key for supplier matching.</dd>
            <dt>Correction</dt><dd>Manual edit that overrides AI-extracted data.</dd>
            <dt>Discrepancy</dt><dd>Validation failure or warning (e.g., total mismatch).</dd>
            <dt>Stem</dt><dd>Unique ID derived from filename (e.g., <code>inv_123</code> from <code>inv_123.pdf</code>).</dd>
            <dt>WAL Mode</dt><dd>Write-Ahead Logging in SQLite for concurrent performance.</dd>
          </dl>
        </div>
      </div>
    `
  },
  'keyboard-shortcuts': {
    title: 'Keyboard Shortcuts',
    subtitle: 'Workflow commands',
    content: `
      <div class="help-container">
        <div class="help-section">
          <table>
            <thead><tr><th>Key</th><th>Action</th></tr></thead>
            <tbody>
              <tr><td><kbd>/</kbd></td><td>Focus search bar</td></tr>
              <tr><td><kbd>E</kbd></td><td>Edit invoice</td></tr>
              <tr><td><kbd>S</kbd></td><td>Mark Ready</td></tr>
              <tr><td><kbd>F</kbd></td><td>Flag invoice</td></tr>
              <tr><td><kbd>X</kbd></td><td>Export</td></tr>
              <tr><td><kbd>R</kbd></td><td>Reprocess</td></tr>
              <tr><td><kbd>N</kbd></td><td>Notes</td></tr>
              <tr><td><kbd>Ctrl</kbd>+<kbd>Enter</kbd></td><td>Save Edits</td></tr>
              <tr><td><kbd>Esc</kbd></td><td>Cancel / Close</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    `
  }
};

function initTheme() {
  const saved = localStorage.getItem('theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', 'dark');
  }
}

function toggleTheme() {
  const current = document.documentElement.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
}

initTheme();

function setTab(tab) {
  document.querySelectorAll('.side-tab').forEach(el => {
    el.classList.toggle('active', el.dataset.tab === tab);
  });
  
  const section = sections[tab];
  if (section) {
    document.getElementById('page-title').textContent = section.title;
    document.getElementById('page-subtitle').textContent = section.subtitle || '';
    document.getElementById('content-area').innerHTML = section.content;
    history.replaceState(null, null, '#' + tab);
  }
}

const initialTab = location.hash.slice(1) || 'getting-started';
setTab(initialTab);
</script>
</body>
</html>
