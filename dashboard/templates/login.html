<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign In â€” Parsely</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2316a34a' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 20 C12 18 12 16 12 14 C12 12 12 10 13 8' fill='none'/%3E%3Cpath d='M12 15 C9 15 7 13 7 10 C7 7 9 5 12 6 C11 8 10 10 11 12 C12 13 13 14 12 15Z' fill='%2316a34a' stroke='none' opacity='0.9'/%3E%3Cpath d='M12 12 C15 12 17 10 17 7 C17 4 15 3 12 4 C13 6 14 8 13 10 C12 11 11 11 12 12Z' fill='%2316a34a' stroke='none' opacity='0.9'/%3E%3Cpath d='M13 8 C11 6 12 4 14 3 C15 4 15 6 13 8Z' fill='%2316a34a' stroke='none'/%3E%3Cpath d='M11 13 C9 12 9 10 10 9 C11 10 12 12 11 13Z' fill='%2316a34a' stroke='none' opacity='0.7'/%3E%3Cpath d='M13 10 C15 9 15 7 14 6 C13 7 12 9 13 10Z' fill='%2316a34a' stroke='none' opacity='0.7'/%3E%3C/svg%3E">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg:        #f0f2f5;
  --card:      #ffffff;
  --border:    #e2e6ea;
  --text:      #1c2533;
  --muted:     #6b7280;
  --ok:        #16a34a;
  --err:       #dc2626;
  --err-bg:    #fee2e2;
  --warn-bg:   #fef3c7;
  --accent:    #3b5bdb;
  --radius:    8px;
  --shadow-md: 0 4px 6px rgba(0,0,0,.07), 0 2px 4px rgba(0,0,0,.06);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg:        #0f172a;
    --card:      #1e293b;
    --border:    #334155;
    --text:      #e2e8f0;
    --muted:     #94a3b8;
    --err-bg:    rgba(220, 38, 38, 0.2);
    --warn-bg:   rgba(217, 119, 6, 0.2);
    --shadow-md: 0 4px 6px rgba(0,0,0,.4), 0 2px 4px rgba(0,0,0,.3);
  }
}

html, body {
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 14px;
  color: var(--text);
  background: var(--bg);
}

body {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}

.login-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  padding: 40px;
  width: 100%;
  max-width: 360px;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 28px;
}

.brand svg {
  flex-shrink: 0;
}

.brand-text {
  font-size: 20px;
  font-weight: 700;
  color: var(--text);
  letter-spacing: -0.3px;
}

.brand-sub {
  font-size: 11px;
  color: var(--muted);
  margin-top: 1px;
}

h1 {
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 20px;
  color: var(--text);
}

.alert {
  padding: 10px 14px;
  border-radius: var(--radius);
  font-size: 13px;
  margin-bottom: 16px;
  line-height: 1.4;
}

.alert-error {
  background: var(--err-bg);
  color: var(--err);
  border: 1px solid rgba(220, 38, 38, 0.3);
}

.alert-warn {
  background: var(--warn-bg);
  color: #92400e;
  border: 1px solid rgba(217, 119, 6, 0.3);
}

@media (prefers-color-scheme: dark) {
  .alert-warn { color: #fbbf24; }
}

.field {
  margin-bottom: 16px;
}

label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.4px;
  margin-bottom: 6px;
}

input[type="text"],
input[type="password"] {
  width: 100%;
  padding: 9px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  font-family: inherit;
  outline: none;
  transition: border-color 0.15s;
}

input[type="text"]:focus,
input[type="password"]:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(59, 91, 219, 0.12);
}

button[type="submit"] {
  width: 100%;
  padding: 10px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  margin-top: 4px;
  transition: opacity 0.15s;
}

button[type="submit"]:hover { opacity: 0.88; }
button[type="submit"]:active { opacity: 0.78; }
</style>
</head>
<body>
<div class="login-card">
  <div class="brand">
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 20 C12 18 12 16 12 14 C12 12 12 10 13 8" fill="none"/>
      <path d="M12 15 C9 15 7 13 7 10 C7 7 9 5 12 6 C11 8 10 10 11 12 C12 13 13 14 12 15Z" fill="#16a34a" stroke="none" opacity="0.9"/>
      <path d="M12 12 C15 12 17 10 17 7 C17 4 15 3 12 4 C13 6 14 8 13 10 C12 11 11 11 12 12Z" fill="#16a34a" stroke="none" opacity="0.9"/>
      <path d="M13 8 C11 6 12 4 14 3 C15 4 15 6 13 8Z" fill="#16a34a" stroke="none"/>
    </svg>
    <div>
      <div class="brand-text">Parsely</div>
      <div class="brand-sub">Invoice Processing</div>
    </div>
  </div>

  <h1>Sign in to continue</h1>

  <!-- Error / info messages driven by query param -->
  <div id="alert-box"></div>

  <form method="post" action="" id="login-form">
    <input type="hidden" name="next" id="next-field" value="">
    <div class="field">
      <label for="username">Username</label>
      <input type="text" id="username" name="username" autocomplete="username"
             autocapitalize="none" autocorrect="off" required autofocus>
    </div>
    <div class="field">
      <label for="password">Password</label>
      <input type="password" id="password" name="password" autocomplete="current-password" required>
    </div>
    <button type="submit">Sign In</button>
  </form>
</div>

<script>
(function () {
  var params = new URLSearchParams(window.location.search);
  var error = params.get('error');
  var next  = params.get('next') || '/';

  // Pass ?next= through the form so the server can redirect after login
  document.getElementById('next-field').value = next;

  var box = document.getElementById('alert-box');
  if (error === 'forbidden') {
    box.innerHTML = '<div class="alert alert-warn">You do not have permission to access that page.</div>';
  } else if (error === '1' || error === 'invalid') {
    box.innerHTML = '<div class="alert alert-error">Invalid username or password.</div>';
  }
})();
</script>
</body>
</html>
