# ── Core invoice processing ────────────────────────────────────────────────
# Accuracy-first PDF extraction (layout-aware, table-preserving, built-in OCR)
docling>=2.0.0

# LLM client — works with any OpenAI-compatible backend:
#   Ollama (local):  LLM_BASE_URL=http://host.docker.internal:11434/v1  LLM_API_KEY=ollama
#   OpenAI:          LLM_BASE_URL=https://api.openai.com/v1              LLM_API_KEY=sk-...
#   Groq, Azure, etc. — same pattern
openai>=1.0.0

# Data models and validation
pydantic>=2.0.0

# ── Matching ───────────────────────────────────────────────────────────────
# Fast fuzzy string matching (supplier names, PO line descriptions)
rapidfuzz>=3.0.0

# ── CLI ────────────────────────────────────────────────────────────────────
click>=8.1.0

# ── Speed-first fallback (optional, used when use_docling=False) ───────────
pdfplumber>=0.10.0

# ── Docling table export support ───────────────────────────────────────────
# Docling uses pandas internally for export_to_dataframe()
pandas>=2.0.0

# ── LLM response handling ───────────────────────────────────────────────────
# Robust JSON repair for malformed/truncated LLM output
json-repair>=0.28.0

# ── Dashboard ───────────────────────────────────────────────────────────────
# Web server for the visualisation dashboard
fastapi>=0.100.0
uvicorn[standard]>=0.23.0
python-multipart>=0.0.9   # required for FastAPI file upload (UploadFile)
# PDF-to-image rendering (uses poppler-utils, already installed in the Docker image)
pdf2image>=1.16.0
# Authentication
bcrypt>=4.0.0             # password hashing for dashboard auth
itsdangerous>=2.1.0       # signed session cookies (explicit; transitive dep of Starlette)

# ── Testing ───────────────────────────────────────────────────────────────────
pytest>=7.0.0             # test framework
pytest-cov>=4.0.0         # coverage reporting
pytest-asyncio>=0.21.0    # async test support
httpx>=0.24.0             # HTTP client for API testing (used by FastAPI TestClient)
